<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:conv="clr-namespace:StraightScorer.Maui.Converters"
             xmlns:models="clr-namespace:StraightScorer.Core.Models;assembly=StraightScorer.Core"
             xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
             x:Class="StraightScorer.Maui.Views.Controls.BreakHistoryItem"
             x:DataType="models:Break">
    <ContentView.Resources>
        <conv:BreakEndActionColorConverter x:Key="EndActionColorConverter"/>
        <toolkit:InvertedBoolConverter x:Key="InvertedBoolConverter"/>
    </ContentView.Resources>
    <VerticalStackLayout
        HorizontalOptions="Fill"
        Spacing="0"
        Padding="8,0">
        <HorizontalStackLayout
            Spacing="8"
            HorizontalOptions="Start">
            <Ellipse
                HorizontalOptions="Start"
                WidthRequest="24"
                HeightRequest="24"
                Fill="{AppThemeBinding Light={StaticResource GraySemi}, Dark={StaticResource GrayDark}}"
                StrokeThickness="6"
                Stroke="{Binding EndAction, Converter={StaticResource EndActionColorConverter}}"/>
            <Label
                FontSize="Body">
                <Label.Text>
                    <MultiBinding StringFormat="{}{0} scored {1} End of break: {2}">
                        <Binding Path="PlayerName"/>
                        <Binding Path="PointsScored"/>
                        <Binding Path="EndAction"/>
                    </MultiBinding>
                </Label.Text>
            </Label>
        </HorizontalStackLayout>
        <BoxView
            HorizontalOptions="Start"
            ZIndex="-1"
            Margin="9,0"
            WidthRequest="5"
            HeightRequest="40"
            BackgroundColor="Transparent"
            Color="{AppThemeBinding Light={StaticResource GraySemi}, Dark={StaticResource GraySemiDark}}"
            IsVisible="{Binding IsLast, Converter={StaticResource InvertedBoolConverter}}"/>
    </VerticalStackLayout>
</ContentView>
